<!DOCTYPE html>
<html class="theme-dark" lang="{{@site.locale}}">
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{asset "built/index.css"}}" />
    <script src="{{asset "built/index.js"}}" defer></script>

    <script>
    // Apply theme immediately to prevent flash
    (function() {
        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
        
        const savedTheme = getCookie('theme') || 'light';
        if (savedTheme === 'dark') {
            document.documentElement.classList.remove('theme-light');
            document.documentElement.classList.add('theme-dark');
        } else {
            document.documentElement.classList.remove('theme-dark');
            document.documentElement.classList.add('theme-light');
        }
    })();
    
    // Global configuration for cards-list component
    window.GhostConfig = {
        apiUrl: '{{@site.url}}',
        contentKey: '{{@custom.content_api_key}}',
        youtubeApiKey: '{{@custom.youtube_api_key}}',
        youtubeChannelId: '{{@custom.youtube_channel_id}}'
    };
    
    // Fallback: Show content if JavaScript fails to load or process snippets
    // This ensures content is always visible even if scripts fail
    setTimeout(function() {
        var contentElement = document.querySelector('.gh-content');
        if (contentElement && !contentElement.classList.contains('snippets-ready')) {
            contentElement.classList.add('snippets-ready');
        }
    }, 2000);
    </script>

    <title>{{meta_title}}</title>

    {{ghost_head}}
    {{!-- Outputs important meta data and settings, should always be in <head> --}}

</head>
<body class="{{body_class}}">

<main>

    <div class="container-global">
        {{> components/header}}

        {{> components/search-popup}}

        {{> components/sidebar}}

        <div class="container-main">

            {{{body}}}
            {{!-- All content gets inserted here, index.hbs, post.hbs, etc --}}

            {{> components/footer}}
        </div>
    </div>

</main>

{{!-- <foot> --}}
{{ghost_foot}}
{{!-- Outputs important scripts - should always be included before closing body tag --}}

</body>
</html>
